<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Status Window Test</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #333;
    }
    .controls {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      margin: 5px;
      font-size: 14px;
    }
    button:hover {
      background: #5568d3;
    }
    .info {
      background: #e3f2fd;
      padding: 15px;
      border-radius: 6px;
      border-left: 4px solid #2196f3;
      margin-top: 20px;
    }
    code {
      background: #f5f5f5;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }
  </style>
</head>
<body>
  <h1>ü§ñ Task Status Window Test</h1>
  
  <div class="controls">
    <h2>Test Controls</h2>
    <p>Click the buttons below to simulate different task status updates:</p>
    
    <button onclick="testStartTask()">Start Task</button>
    <button onclick="testInProgress()">In Progress</button>
    <button onclick="testComplete()">Complete</button>
    <button onclick="testError()">Error</button>
    <button onclick="testHide()">Hide Window</button>
  </div>

  <div class="info">
    <h3>‚ÑπÔ∏è Instructions</h3>
    <p>This page tests the floating task status window that appears in the top-left corner.</p>
    <p>The window shows:</p>
    <ul>
      <li>üìã Current task name</li>
      <li>‚ö° Action being performed</li>
      <li>Status indicator with color coding</li>
    </ul>
    <p><strong>Note:</strong> Make sure the browser extension is loaded and the content script is active.</p>
  </div>

  <script>
    // Simulate sending messages to content script
    function sendStatusUpdate(task, action, status) {
      // In a real extension, this would be:
      // chrome.tabs.sendMessage(tabId, { action: 'updateTaskStatus', task, action, status });
      
      // For testing, we'll directly call the content script function if available
      if (typeof updateTaskStatus === 'function') {
        updateTaskStatus(task, action, status);
      } else {
        console.log('Content script not loaded. Status update:', { task, action, status });
        alert('Content script not loaded. Check console for details.');
      }
    }

    function testStartTask() {
      sendStatusUpdate(
        'Search Bilibili Videos',
        'Initializing search',
        'Starting'
      );
    }

    function testInProgress() {
      sendStatusUpdate(
        'Search Bilibili Videos',
        'Filling search input with query',
        'In progress'
      );
    }

    function testComplete() {
      sendStatusUpdate(
        'Search Bilibili Videos',
        'Search submitted successfully',
        'Complete'
      );
    }

    function testError() {
      sendStatusUpdate(
        'Search Bilibili Videos',
        'Failed to find search input',
        'Error: Element not found'
      );
    }

    function testHide() {
      if (typeof hideTaskStatus === 'function') {
        hideTaskStatus();
      } else {
        console.log('hideTaskStatus function not available');
      }
    }

    // Auto-test on page load
    window.addEventListener('load', () => {
      console.log('Test page loaded. Click buttons to test task status window.');
      
      // Show initial status after 1 second
      setTimeout(() => {
        testStartTask();
      }, 1000);
    });
  </script>
</body>
</html>
