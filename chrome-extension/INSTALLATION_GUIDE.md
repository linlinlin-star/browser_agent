# Browser Agent 插件安装和使用指南

## 📦 安装步骤

### 方法 1: 从源码安装（推荐）

1. **下载源码**
   ```bash
   # 克隆仓库或下载 ZIP
   git clone <repository-url>
   # 或直接下载并解压
   ```

2. **打开 Chrome 扩展页面**
   - 在地址栏输入: `chrome://extensions/`
   - 或通过菜单: 更多工具 → 扩展程序

3. **启用开发者模式**
   - 在页面右上角找到"开发者模式"开关
   - 点击开启

4. **加载扩展**
   - 点击"加载已解压的扩展程序"
   - 选择 `chrome-extension` 文件夹
   - 点击"选择文件夹"

5. **验证安装**
   - 确认扩展列表中出现 "Browser Agent"
   - 确认工具栏出现插件图标
   - 点击图标测试弹出窗口

### 方法 2: 从 .rar 文件安装

1. **解压文件**
   ```bash
   # 解压 chrome-extension.rar
   # 得到 chrome-extension 文件夹
   ```

2. **按照方法 1 的步骤 2-5 操作**

## 🚀 快速开始

### 第一次使用

1. **配置 API**
   - 点击插件图标
   - 点击设置按钮（齿轮图标）
   - 选择 API 提供商（OpenAI/Anthropic/DeepSeek/自定义）
   - 输入 API 密钥
   - 配置 API 端点（如需要）
   - 选择模型
   - 点击"保存设置"

2. **测试功能**
   - 在输入框输入简单任务
   - 点击发送按钮
   - 观察执行过程
   - 查看结果

### 基本操作

#### 1. 执行任务

```
输入示例:
- "搜索百度关于人工智能的信息"
- "打开 bilibili.com 并找到热门视频"
- "提取当前页面的主要内容"
```

#### 2. 查看日志

- 切换到 "Current Session" 标签页
- 查看任务执行日志
- 监控进度和状态

#### 3. 管理文件

- 切换到 "Files" 标签页
- 查看生成的文件
- 预览、编辑、下载文件

## 📁 文件管理功能

### 查看文件列表

1. 点击插件图标
2. 切换到 "Files" 标签页
3. 查看所有生成的文件

### 预览文件

**CSV 文件**:
1. 点击文件的"预览"按钮
2. 查看表格数据
3. 可以直接编辑单元格
4. 点击"保存更改"保存

**HTML 文件**:
1. 点击文件的"预览"按钮
2. 查看渲染的 HTML
3. 切换到"源代码"查看源码

### 编辑 CSV 文件

1. **编辑单元格**
   - 点击任意单元格
   - 输入新内容
   - 点击其他地方或按 Tab 保存

2. **添加行**
   - 点击"添加行"按钮
   - 在新行中输入数据
   - 点击"保存更改"

3. **删除行**
   - 点击行末的删除按钮
   - 确认删除
   - 点击"保存更改"

4. **重命名文件**
   - 点击文件名旁的重命名按钮
   - 输入新名称
   - 点击确定

### 其他操作

- **复制**: 创建文件副本
- **下载**: 下载到本地
- **删除**: 永久删除文件
- **搜索**: 在搜索框输入关键词
- **过滤**: 按文件类型过滤

## 🔧 高级功能

### 自定义 API 配置

```javascript
// 自定义端点示例
{
  "apiEndpoint": "https://your-api.com/v1/chat/completions",
  "apiKey": "your-api-key",
  "model": "your-model-name"
}
```

### 任务规划

插件会自动将复杂任务分解为子目标：
- 分析任务需求
- 制定执行计划
- 逐步完成子目标
- 报告最终结果

### 进度跟踪

- 实时显示当前子目标
- 显示完成百分比
- 显示步骤计数
- 显示预估剩余步骤

## 📊 使用场景

### 场景 1: 数据提取

```
任务: "从当前页面提取所有产品信息并生成 CSV"

步骤:
1. 插件分析页面结构
2. 提取产品数据
3. 生成 CSV 文件
4. 在 Files 标签页查看
5. 下载或编辑文件
```

### 场景 2: 内容搜索

```
任务: "搜索百度关于'机器学习'的前5个结果"

步骤:
1. 打开百度搜索
2. 输入关键词
3. 提取搜索结果
4. 生成报告
5. 查看结果
```

### 场景 3: 页面导航

```
任务: "打开 bilibili.com 并找到今日热门视频"

步骤:
1. 导航到网站
2. 分析页面结构
3. 定位热门视频
4. 提取视频信息
5. 生成列表
```

## 🎯 最佳实践

### 任务描述

**好的描述**:
- ✅ "搜索百度关于人工智能的信息，提取前3个结果的标题和链接"
- ✅ "打开 github.com，搜索 'react'，找到 star 最多的项目"
- ✅ "从当前页面提取所有图片的 URL 并生成列表"

**不好的描述**:
- ❌ "帮我搜索"（太模糊）
- ❌ "找东西"（不明确）
- ❌ "做点什么"（没有目标）

### 文件管理

1. **定期清理**
   - 删除不需要的文件
   - 避免 localStorage 溢出

2. **及时下载**
   - 重要文件及时下载
   - 不要长期依赖浏览器存储

3. **合理命名**
   - 使用描述性文件名
   - 包含日期或版本号

### 性能优化

1. **避免过大文件**
   - CSV 行数建议 < 1000
   - 单个文件 < 5MB

2. **批量操作**
   - 使用搜索和过滤
   - 批量删除不需要的文件

## 🐛 故障排查

### 问题 1: 插件无法加载

**症状**: 扩展页面显示错误

**解决方案**:
1. 检查文件夹结构是否完整
2. 确认 manifest.json 存在
3. 查看错误详情
4. 重新加载扩展

### 问题 2: API 调用失败

**症状**: 任务执行失败，显示 API 错误

**解决方案**:
1. 检查 API 密钥是否正确
2. 确认 API 端点可访问
3. 检查网络连接
4. 查看控制台错误信息

### 问题 3: 文件无法保存

**症状**: 点击保存后没有反应

**解决方案**:
1. 检查 localStorage 是否已满
2. 清理不需要的文件
3. 刷新插件
4. 查看控制台错误

### 问题 4: 按钮无法点击

**症状**: 点击按钮没有反应

**解决方案**:
1. 刷新插件
2. 清除浏览器缓存
3. 重新加载扩展
4. 查看控制台是否有错误

### 问题 5: 预览页面空白

**症状**: 点击预览后显示空白

**解决方案**:
1. 检查文件数据是否完整
2. 重新生成文件
3. 查看控制台错误
4. 尝试下载文件查看内容

## 📝 测试功能

### 使用测试页面

1. **打开测试页面**
   ```
   chrome-extension/test-file-operations.html
   ```

2. **生成测试文件**
   - 点击"生成测试 CSV"
   - 点击"生成测试 HTML"
   - 点击"生成多个文件"

3. **测试所有功能**
   - 预览
   - 编辑
   - 复制
   - 下载
   - 删除
   - 搜索
   - 过滤

## 🔒 安全和隐私

### 数据存储

- 所有数据存储在本地浏览器
- 使用 localStorage
- 不上传到服务器
- 可随时清除

### API 密钥

- 密钥存储在本地
- 不会发送到第三方
- 建议定期更换
- 不要分享给他人

### 权限说明

插件需要以下权限：
- `activeTab`: 访问当前标签页
- `storage`: 本地数据存储
- `scripting`: 注入脚本
- `tabs`: 标签页管理

## 📚 更多资源

### 文档

- `FILE_FEATURES.md` - 功能详细说明
- `FILE_LOG_SEPARATION.md` - 架构说明
- `BUTTON_FIX.md` - 技术细节
- `UPDATE_SUMMARY.md` - 更新日志
- `VERIFICATION_CHECKLIST.md` - 测试清单

### 测试文件

- `test-file-operations.html` - 文件操作测试
- `test-tab-switching.html` - 标签页测试
- `test-file-features.html` - 功能测试
- `test-file-separation.html` - 分离测试

### 示例

- `GENERATE_DOCUMENT_EXAMPLE.md` - 文档生成示例
- `task-status-integration-example.js` - 状态集成示例

## 💡 提示和技巧

### 提高效率

1. **使用快捷键**
   - Ctrl/Cmd + F: 聚焦搜索框
   - Esc: 清除搜索

2. **批量操作**
   - 使用过滤器快速定位
   - 搜索特定文件

3. **快速预览**
   - 双击文件名预览
   - 使用键盘导航

### 避免问题

1. **不要存储敏感信息**
   - 文件存储在本地
   - 可能被其他程序访问

2. **定期备份**
   - 下载重要文件
   - 不要依赖浏览器存储

3. **监控存储空间**
   - 定期清理文件
   - 避免 localStorage 溢出

## 🆘 获取帮助

### 常见问题

查看 `VERIFICATION_CHECKLIST.md` 中的故障排查部分

### 报告问题

1. 描述问题
2. 提供重现步骤
3. 附上截图
4. 包含控制台日志

### 功能建议

欢迎提出改进建议和新功能需求

## 📄 许可证

请查看项目许可证文件

---

**版本**: v1.0.0
**最后更新**: 2024年
**状态**: 稳定版

祝使用愉快！🎉
